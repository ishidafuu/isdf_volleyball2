# データベーススキーマ定義テンプレート

## 1. テンプレートの使用方法

### 1.1 基本ルール
- すべての項目を漏れなく記入すること
- 未定の項目は「未定」と明記
- 選択肢のある項目は提供された選択肢から選ぶこと
- コメントは # で開始すること

### 1.2 記入上の注意
- インデントはスペース2文字を使用
- 箇条書きはハイフン（-）を使用
- 補足説明は > を使用
- コードブロックは ``` で囲む

## 2. スキーマ定義テンプレート

```markdown
# テーブル定義書

## 基本情報
- テーブル名: {テーブル名}
- 概要: {テーブルの説明}
- 想定レコード数: {数値} records
- 作成者: {作成者名}
- 作成日: {YYYY-MM-DD}
- 最終更新日: {YYYY-MM-DD}

## 制約条件
- PRIMARY KEY: {主キーとなるカラム}
- UNIQUE KEY: {一意制約のあるカラム}
- 参照整合性制約:
  - {外部キー制約の定義}
  - {参照先テーブル.カラム}

## カラム定義

### {カラム名1}
- データ型: {型名}
- NULL許可: [YES/NO]
- デフォルト値: {値}
- 説明: {カラムの説明}
- 制約: {存在する場合は制約条件}
- 備考: {補足情報があれば記載}

### {カラム名2}
[同様の形式で記載]

## インデックス定義

### {インデックス名1}
- 対象カラム: {カラム名}
- 種類: [BTREE/HASH/FULLTEXT]
- 目的: {作成理由}
- 基数: {概算の異なり数}

### {インデックス名2}
[同様の形式で記載]

## パーティション定義
※パーティションを使用する場合のみ記載

- パーティション方式: [RANGE/LIST/HASH]
- パーティションキー: {カラム名}
- パーティション定義:
  ```sql
  {パーティション定義のSQL}
  ```

## 補足情報
- 特記事項: {必要に応じて記載}
- 検討事項: {要検討事項があれば記載}
- 変更履歴: 
  - {YYYY-MM-DD}: {変更内容}
```

## 3. 記入例

```markdown
# テーブル定義書

## 基本情報
- テーブル名: characters
- 概要: キャラクター基本情報管理テーブル
- 想定レコード数: 1000 records
- 作成者: 開発者A
- 作成日: 2024-01-15
- 最終更新日: 2024-01-20

## 制約条件
- PRIMARY KEY: character_id
- UNIQUE KEY: school_code, registration_number
- 参照整合性制約:
  - school_id -> junior_high_schools.school_id
  - team_id -> teams.team_id

## カラム定義

### character_id
- データ型: BIGINT UNSIGNED
- NULL許可: NO
- デフォルト値: NULL
- 説明: キャラクターID
- 制約: AUTO_INCREMENT
- 備考: システム内部での一意識別子

### first_name
- データ型: VARCHAR(50)
- NULL許可: NO
- デフォルト値: NULL
- 説明: キャラクターの名
- 制約: なし
- 備考: 日本語名の場合は最大16文字相当

## インデックス定義

### idx_characters_name
- 対象カラム: first_name, last_name
- 種類: BTREE
- 目的: 名前による検索の効率化
- 基数: 1000

## 補足情報
- 特記事項: 名前は日本語と英語の両方に対応
- 検討事項: ミドルネームのサポートを検討中
- 変更履歴: 
  - 2024-01-20: name カラムを first_name, last_name に分割
```

## 4. 補足情報

### 4.1 データ型選択基準
1. 数値型
   - INT: 一般的なID、カウンター
   - BIGINT: 大きな数値、タイムスタンプ
   - DECIMAL: 金額、正確な小数値

2. 文字列型
   - CHAR: 固定長文字列
   - VARCHAR: 可変長文字列
   - TEXT: 長文テキスト

3. 日時型
   - DATE: 日付のみ
   - DATETIME: 日付と時刻
   - TIMESTAMP: タイムスタンプ

### 4.2 制約の使用指針
1. NULL制約
   - 必須項目は NOT NULL
   - オプション項目は NULL 許可

2. デフォルト値
   - 適切な初期値の設定
   - 現在時刻は CURRENT_TIMESTAMP

3. 一意制約
   - 重複を許可しない値
   - 複合キーの考慮