# データベース運用手順ガイドライン

## 1. 基本方針

### 1.1 データ整合性の維持
- 既存データの優先使用
- 重複登録の厳密な防止
- ID体系の一貫性確保
- 参照整合性の厳守

### 1.2 データ操作の原則
- 最小権限での操作実施
- トランザクション管理の徹底
- バックアップ確保
- 操作ログの記録

## 2. マスターデータ管理

### 2.1 マスターデータの取り扱い
- 既存レコードの確認必須
  * キャラクター情報
  * 学校情報
  * チーム情報
  * 基本設定値
- 新規登録の制限
  * 明確な必要性の確認
  * 既存データとの重複チェック
  * 承認プロセスの実施

### 2.2 ID管理
- 既存ID体系の遵守
- ID形式の独自解釈禁止
- ID採番ルールの統一
- ID再利用の禁止

## 3. データ操作手順

### 3.1 データ参照
1. 既存データの確認
   - 対象テーブルの構造確認
   - 関連テーブルの確認
   - インデックスの確認

2. 検索条件の最適化
   - インデックスの活用
   - 結合条件の適正化
   - 検索範囲の最小化

### 3.2 データ更新
1. 事前確認
   - 更新対象の特定
   - 影響範囲の確認
   - 外部キー制約の確認

2. 更新手順
   - トランザクション開始
   - 更新前データのバックアップ
   - 更新処理の実行
   - 整合性チェック
   - コミットまたはロールバック

### 3.3 データ登録
1. 重複チェック
   - 既存データの検索
   - 類似データの確認
   - 命名規則の確認

2. 登録手順
   - 必須項目の確認
   - 外部キー参照の確認
   - データ形式の検証
   - トランザクション内での登録
   - 登録結果の確認

## 4. 整合性チェック項目

### 4.1 テーブル間の整合性
- 外部キー参照の有効性
- マスターデータとの整合性
- コード値の妥当性
- 時系列データの連続性

### 4.2 データ内容の整合性
- 必須項目の充足
- 形式の正確性
- 値の範囲妥当性
- ビジネスルールとの整合性

## 5. 禁止事項

### 5.1 データ操作の禁止事項
- ID体系の独自解釈・生成
- マスターデータの安易な追加・変更
- トランザクション外での更新
- 一時的な不整合の放置

### 5.2 運用上の禁止事項
- 未承認のスキーマ変更
- バックアップなしの更新
- ログ取得の無効化
- テスト環境での本番データ使用

## 6. エラー発生時の対応

### 6.1 即時対応事項
1. 操作の中断
2. 影響範囲の特定
3. エラー状況の記録
4. 関係者への通知

### 6.2 復旧手順
1. バックアップデータの確認
2. 復旧計画の策定
3. 承認取得
4. 復旧作業の実施
5. 動作確認
6. 再発防止策の策定